---
import { getCollection } from "astro:content";

const blogPosts = await getCollection("blog");
---

<div class="mt-24">
  <h2 class="text-3xl font-bold tracking-tight text-zinc-800 sm:text-4xl">
    Recent publications
  </h2>
  <p class="mt-3 text-xl text-zinc-500 sm:mt-4">
    These are my last publications about my works, my learnings, and hobbies. Do
    not hesitate to reach me if you want more explanations about a subject I
    talked about.
  </p>
  <div class="h-0.5 w-full bg-zinc-100 my-16"></div>
  {
    blogPosts.map((post) => (
      <div class="flex-col sm:flex sm:flex-row sm:h-44 not-last:mb-16">
        <img
          src={`/images/${post.data.image}`}
          alt="abstract"
          class="h-44 sm:w-44 shrink-0 rounded-lg shadow-lg object-cover"
        />
        <div class="h-64 mt-4 sm:mt-0 sm:ml-8 sm:h-full flex flex-col">
          <div class="flex items-center mb-2">
            <div class="h-4 w-0.5 bg-zinc-200 mr-2" />
            <p class="text-sm text-zinc-400">{post.data.date}</p>
          </div>

          <p class="text-xl text-zinc-800 font-semibold mb-2">
            {post.data.title}
          </p>

          <div class="text-ellipsis overflow-hidden relative">
            <p class="text-zinc-400 text-md">{post.data.summary}</p>
            <div class="bg-gradient-to-t from-white to-transparent h-24 w-full absolute left-0 bottom-0" />
          </div>

          <a
            class="flex items-center text-teal-400 hover:text-teal-300 cursor-pointer mt-auto transition-all duration-300"
            href={`/blog/${post.slug}`}
          >
            <p class="mr-2">Read article</p>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              class="w-5 h-5"
            >
              <path d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z" />
            </svg>
          </a>
        </div>
      </div>
    ))
  }
</div>
